<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Crime Against Children in India 2001-2012</title>
		<meta name="description" content="">
		<link href="assets/css/bootstrap.min.css" rel="stylesheet">
		<link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet">
		<link href="assets/css/leaflet.css" rel="stylesheet">
		<link href="assets/css/MarkerCluster.css" rel="stylesheet">
		<link href="assets/css/MarkerCluster.Default.css" rel="stylesheet">
		<link href="assets/css/style.css" rel="stylesheet">
	</head>
	<body>
		<div class="container">
			<div class="mashead">
				<h3 class="muted">Crime Against Children in India 2001-2012</h3>
				<div class="navbar">
					<div class="navbar-inner">
						<div class="container">
							<ul class="nav">
								<li class="active"><a href="#">Home</a></li>
								<li><a href="#">Visualizations</a></li>
								<li><a href="#">About Us</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>	

			<div class="jumbotron">
				<h2>Crime Against Children in India</h2>
				<p class="lead">The data has been taken from <a href="http://data.gov.in/">Open Government Data (OGD) Platform India</a> and refers to details on district wise crimes against Children under various crime categories such as Murder, Rape, Kidnapping and Abduction, Foeticide, Abetment of suicide, Exposure and abandonment, Procuration of minor girls, Buying of girls for prostitution, Selling of girls for prostitution, Prohibition of child marriage act and Other Crimes.</p>
			</div>
			<h3>Displaying Data of Year 2012</h3>
			<div style="width:1170px; height:800px" id="map"></div>
		</div>	
		<script src="assets/js/google-maps.js"></script>
		<script src="assets/js/jquery.min.js" type="text/javascript"></script>
		<script src="assets/js/bootstrap.min.js"></script>
		<script src="assets/js/leaflet.js"></script>
		<script src="assets/js/leaflet.markercluster-src.js"></script>
		<script src="assets/js/leaflet-google.js"></script>
		<script type="text/javascript">
			var map = new L.Map('map', {center: new L.LatLng(22, 78), zoom: 5});
			var googleLayer = new L.Google('ROADMAP');
			map.addLayer(googleLayer);
			var markers = L.markerClusterGroup();
			var marker_list = [];
			var cities;
			var year = "2012";
			$.getJSON("assets/data/geodata.json", function(json){
				cities = json;
			});
			$.getJSON("assets/data/data.json", function(crimes){
				for(state in crimes.data[year])
				{
					marker_list = []
					for(crime_index in crimes.data[year][state])
					{
						crime = crimes.data[year][state][crime_index];
						var city = crime[0];
						if(state == "DELHI" || state == "SIKKIM")	
						{
							city = state + " " + city; 
						}
						if(cities[city] != null)
						{
							for(var i=1; i <= parseInt(crime[12]); i++)
							{
								var marker = L.marker(new L.LatLng(cities[city][0], cities[city][1]), { title: city });
								marker.bindPopup(city);
								marker_list.push(marker);
							}
						}
					}
					markers.addLayers(marker_list);
				}
			});	
			map.addLayer(markers);
		</script>
	</body>	
</html>

